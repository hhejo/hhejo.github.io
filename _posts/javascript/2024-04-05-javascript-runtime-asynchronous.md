---
title: JavaScript ëŸ°íƒ€ìž„ì˜ ë¹„ë™ê¸° ì œì–´
date: 2024-04-05 15:25:07 +0900
last_modified_at: 2024-04-05 15:25:07 +0900
categories: [JavaScript]
tags:
  [
    javascript,
    runtime,
    browser,
    call-stack,
    web-apis,
    task-queue,
    event-loop,
    microtask-queue
  ]
---

JavaScript ëŸ°íƒ€ìž„ì—ì„œ ë¹„ë™ê¸°ë¥¼ ë‹¤ë£¨ëŠ” í˜¸ì¶œ ìŠ¤íƒ, ì›¹ API, íƒœìŠ¤í¬ í, ì´ë²¤íŠ¸ ë£¨í”„, ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## JavaScript ëŸ°íƒ€ìž„ì˜ ë¹„ë™ê¸° ì œì–´

JavaScript Runtime

- Call Stack
- Web APIs
- Event Loop
- Task Queue
- Microtask Queue

### í˜¸ì¶œ ìŠ¤íƒ(Call Stack)

- í˜¸ì¶œ ìŠ¤íƒì€ í”„ë¡œê·¸ëž¨ ì‹¤í–‰ì„ ê´€ë¦¬
- í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, ìƒˆë¡œìš´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ì–´ í˜¸ì¶œ ìŠ¤íƒì— í‘¸ì‹œ
- í•¨ìˆ˜ê°€ ì‹¤í–‰ì„ ì™„ë£Œí•˜ë©´, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ í˜¸ì¶œ ìŠ¤íƒì—ì„œ íŒ

JavaScript

- JavaScriptëŠ” ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ, ë‹¨ì¼ Call Stackìœ¼ë¡œ ìž‘ì—…
- ì¦‰, í•œ ë²ˆì— í•˜ë‚˜ì˜ ìž‘ì—…ë§Œ ì²˜ë¦¬ ê°€ëŠ¥
- í•œ ìž‘ì—…ì´ ì˜¤ëž˜ ì‹¤í–‰ë˜ë©´, ë‹¤ë¥¸ ìž‘ì—…ì˜ ì‹¤í–‰ì„ ì°¨ë‹¨í•´ í”„ë¡œê·¸ëž¨ì´ ì •ì§€ëœ ê²ƒì²˜ëŸ¼ ë³´ìž„

```javascript
fetch("https://website.com/api/posts"); // ë°ì´í„°ë¥¼ ë°˜í™˜í•  ë•Œê¹Œì§€ í˜¸ì¶œ ìŠ¤íƒì— ë¨¸ë¬´ë¥´ë©´ ë‹¤ë¥¸ ìž‘ì—… ì‹¤í–‰ì„ ë§‰ê²Œ ë˜ë‚˜?
```

- `fetch` ë“±ì˜ APIë¥¼ ì‚¬ìš©í•´ ì„œë²„ì—ì„œ ë°ì´í„°ê°€ ì–¸ì œ ë°˜í™˜ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ì„ ë•Œ, ë°ì´í„°ê°€ ë°˜í™˜ë  ë•Œê¹Œì§€ í˜¸ì¶œ ìŠ¤íƒì— ë¨¸ë¬´ë¥´ì§€ ì•Šì•„ë„ ë¨
- ìœ„ ê¸°ëŠ¥ì€ ìžë°”ìŠ¤í¬ë¦½íŠ¸ ìžì²´ì˜ ì¼ë¶€ê°€ ì•„ë‹ˆê³  ì›¹ APIë¥¼ í†µí•´ ì œê³µë¨

### ì›¹ API(Web APIs)

- ë¸Œë¼ìš°ì €ê°€ í™œìš©í•˜ëŠ” ê¸°ëŠ¥ê³¼ ìƒí˜¸ìž‘ìš©í•  ìˆ˜ ìžˆëŠ” ì¸í„°íŽ˜ì´ìŠ¤ ì„¸íŠ¸ë¥¼ ì œê³µ
- JavaScriptë¡œ êµ¬ì¶•í•  ë•Œ ìžì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì´ í¬í•¨
- DOM, `fetch`, `setTimeout`, ...
- JavaScript ëŸ°íƒ€ìž„ê³¼ ë¸Œë¼ìš°ì € ê¸°ëŠ¥ ì‚¬ì´ì˜ ë¸Œë¦¬ì§€ ì—­í• 
  - JavaScript ìžì²´ ê¸°ëŠ¥ ì´ìƒì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•¨
- ë¹„ë™ê¸° ìž‘ì—…ì„ ì‹œìž‘í•˜ê³  ì˜¤ëž˜ ì‹¤í–‰ë˜ëŠ” ìž‘ì—…ì„ ë¸Œë¼ìš°ì €ë¡œ ì˜¤í”„ë¡œë“œí•  ìˆ˜ ìžˆê²Œ í•´ì¤Œ
- ì´ëŸ¬í•œ APIì— ì˜í•´ ë…¸ì¶œëœ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ì‹¤ì œë¡œ ìž¥ê¸° ì‹¤í–‰ ìž‘ì—…ì„ ë¸Œë¼ìš°ì € í™˜ê²½ìœ¼ë¡œ ì˜¤í”„ë¡œë“œí•˜ê³  ì´ ìž‘ì—…ì˜ ìµœì¢… ì™„ë£Œë¥¼ ì²˜ë¦¬í•˜ë„ë¡ í•¸ë“¤ëŸ¬ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒ
- ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë¹„ë™ê¸° ìž‘ì—…ì„ ì‹œìž‘í•œ í›„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ í˜¸ì¶œ ìŠ¤íƒì—ì„œ ë¹ ë¥´ê²Œ ì‚¬ë¼ì§ˆ ìˆ˜ ìžˆìŒ
  - ë…¼ ë¸”ë¡œí‚¹(non-blocking)
- ë¹„ë™ê¸° ê¸°ëŠ¥ì„ ë…¸ì¶œí•˜ëŠ” ì›¹ APIëŠ” ì½œë°± ê¸°ë°˜ ë˜ëŠ” í”„ë¼ë¯¸ìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©
- ë¹„ë™ê¸° ìž‘ì—…ì„ ì‹œìž‘í•˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œì€ í˜¸ì¶œ ìŠ¤íƒì— ì¶”ê°€ë˜ì§€ë§Œ, ì´ëŠ” ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•˜ê¸° ìœ„í•œ ê²ƒ
  - ì‹¤ì œ ë¹„ë™ê¸° ìž‘ì—…ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬ë˜ë©° í˜¸ì¶œ ìŠ¤íƒì— ë‚¨ì•„ìžˆì§€ ì•ŠìŒ

ë¸Œë¼ìš°ì €

- ìˆ˜ë§Žì€ ê¸°ëŠ¥ì„ í™œìš©í•˜ëŠ” ê°•ë ¥í•œ í”Œëž«í¼
- ì»¨í…ì¸ ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ë Œë”ë§ ì—”ì§„
- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ìœ„í•œ ë„¤íŠ¸ì›Œí‚¹ ìŠ¤íƒ
- ì„¼ì„œ, íŒŒì¼ ì‹œìŠ¤í…œ, ì¹´ë©”ë¼ ë“±

ì½œë°± ê¸°ë°˜ APIs

- ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ìƒˆë¡œ ìƒì„±ëœ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ í˜¸ì¶œ ìŠ¤íƒì— í‘¸ì‹œ
- ì›¹ APIì— ëŒ€í•œ ì½œë°±ì„ ë“±ë¡í•œ ë‹¤ìŒ ìž‘ì—…ì„ ë¸Œë¼ìš°ì €ë¡œ ì˜¤í”„ë¡œë“œí•˜ëŠ” ê²ƒìž„
- ê·¸ í›„ í•¨ìˆ˜ëŠ” í˜¸ì¶œ ìŠ¤íƒì—ì„œ íŒë˜ê³  ì´ì œë¶€í„° ë¸Œë¼ìš°ì €ì˜ ì±…ìž„
- ëª¨ë“  ìž‘ì—…ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì§„í–‰ë˜ë¯€ë¡œ í˜¸ì¶œ ìŠ¤íƒì€ ê³„ì†í•´ì„œ ë‹¤ë¥¸ ìž‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥
- ìž‘ì—…ì´ ì™„ë£Œëœ í›„ ì½œë°±ì„ ë‹¨ìˆœížˆ í˜¸ì¶œ ìŠ¤íƒìœ¼ë¡œ ë°”ë¡œ í‘¸ì‹œí•  ìˆ˜ëŠ” ì—†ìŒ
- ê·¸ë ‡ê²Œ í•˜ë©´ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ìž‘ì—…ì´ ìž ìž¬ì ìœ¼ë¡œ ì¤‘ë‹¨ë˜ì–´ ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ë™ìž‘ê³¼ ìž ìž¬ì ì¸ ì¶©ëŒì´ ë°œìƒí•  ìˆ˜ ìžˆê¸° ë•Œë¬¸
- JavaScript ì—”ì§„ì€ í•œ ë²ˆì— í•˜ë‚˜ì”© ìž‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì²´ê³„ì ì¸ ì‹¤í–‰ í™˜ê²½ì„ ë³´ìž¥

### íƒœìŠ¤í¬ í(Task Queue)

- ëŒ€ì‹ ì— ì½œë°±ì´ íƒœìŠ¤í¬ í(ì½œë°± í(Callback Queue))ì— ì¶”ê°€ë¨
- íƒœìŠ¤í¬ íëŠ” ë¯¸ëž˜ì˜ íŠ¹ì • ì‹œì ì— ì‹¤í–‰ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì›¹ API ì½œë°± ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë³´ìœ 
- ì½œë°± ê¸°ë°˜ ì›¹ APIì—ì„œ ë¹„ë™ê¸° ìž‘ì—…ì´ ì™„ë£Œëœ í›„ ì½œë°±ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•˜ëŠ” ë° ì‚¬ìš©ë¨

### ì´ë²¤íŠ¸ ë£¨í”„(Event Loop)

- í˜¸ì¶œ ìŠ¤íƒì´ ë¹„ì–´ìžˆëŠ”ì§€ ì§€ì†ì ìœ¼ë¡œ í™•ì¸
- í˜¸ì¶œ ìŠ¤íƒì´ ë¹„ì–´ ìžˆì„ ë•Œë§ˆë‹¤(í˜„ìž¬ ì‹¤í–‰ ì¤‘ì¸ ìž‘ì—…ì´ ì—†ìŒì„ ì˜ë¯¸) íƒœìŠ¤í¬ íì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ ìž‘ì—…ì„ ê°€ì ¸ì™€ ì´ë¥¼ ì½œë°±ì´ ì‹¤í–‰ë˜ëŠ” í˜¸ì¶œ ìŠ¤íƒìœ¼ë¡œ ì˜®ê¹€
- ì´ë²¤íŠ¸ ë£¨í”„ëŠ” í˜¸ì¶œ ìŠ¤íƒì´ ë¹„ì–´ìžˆëŠ”ì§€ ì§€ì†ì ìœ¼ë¡œ í™•ì¸í•˜ê³ , ë¹„ì–´ ìžˆìœ¼ë©´ íƒœìŠ¤í¬ íì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ ìž‘ì—…ì„ í™•ì¸í•œ í›„ ì´ë¥¼ í˜¸ì¶œ ìŠ¤íƒìœ¼ë¡œ ì´ë™í•˜ì—¬ ì‹¤í–‰í•¨

### ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ í(Microtask Queue)

- íƒœìŠ¤í¬ íë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ëŸ°íƒ€ìž„ì˜ ë˜ ë‹¤ë¥¸ í
- í”„ë¼ë¯¸ìŠ¤ í•¸ë“¤ëŸ¬ ì½œë°± `then(callback)`, `catch(callback)`, `finally(callback)`
- `await` í›„ `async` í•¨ìˆ˜ ë³¸ë¬¸ ì‹¤í–‰
- `MutationObserver` ì½œë°±
- `queueMicrotask` ì½œë°±
- í˜¸ì¶œ ìŠ¤íƒì´ ë¹„ì–´ ìžˆìœ¼ë©´, ì´ë²¤íŠ¸ ë£¨í”„ëŠ” íƒœìŠ¤í¬ íë¡œ ì´ë™í•˜ê¸° ì „ì— ë¨¼ì € ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì˜ ëª¨ë“  ìž‘ì—…ì„ ì²˜ë¦¬
- íƒœìŠ¤í¬ íì—ì„œ ë‹¨ì¼ ìž‘ì—…ì„ ì™„ë£Œí•˜ê³  í˜¸ì¶œ ìŠ¤íƒì´ ë¹„ì–´ ìžˆìœ¼ë©´, ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ë‹¤ìŒ ìž‘ì—…ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™í•˜ê¸° ì „ì— ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì˜ ëª¨ë“  ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë¥¼ ì²˜ë¦¬í•˜ì—¬ íš¨ê³¼ì ìœ¼ë¡œ "ë‹¤ì‹œ ì‹œìž‘"(starts over)ë¨
- ì´ë¥¼ í†µí•´ ë°©ê¸ˆ ì™„ë£Œëœ ìž‘ì—…ê´€ ê´€ë ¨ëœ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ê°€ ì¦‰ì‹œ ì²˜ë¦¬ë˜ì–´ í”„ë¡œê·¸ëž¨ì˜ ì‘ë‹µì„±ê³¼ ì¼ê´€ì„±ì´ ìœ ì§€ë¨
- ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ëŠ” ë‹¤ë¥¸ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë¥¼ ì˜ˆì•½í•  ìˆ˜ë„ ìžˆìŒ
  - ì´ëŠ” ë¬´í•œ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ ë£¨í”„ë¥¼ ìƒì„±í•˜ì—¬ íƒœìŠ¤í¬ íë¥¼ ë¬´í•œì • ì§€ì—°í•˜ê³ , í”„ë¡œê·¸ëž¨ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì„ ì •ì§€ì‹œí‚¬ ìˆ˜ ìžˆì–´ ì£¼ì˜í•´ì•¼ í•¨
  - ì´ëŸ¬í•œ ì‹œë‚˜ë¦¬ì˜¤ëŠ” íƒœìŠ¤í¬íì—ì„œëŠ” ë°œìƒí•  ìˆ˜ ì—†ìŒ
  - ì´ë²¤íŠ¸ ë£¨í”„ëŠ” íƒœìŠ¤í¬ íì˜ ìž‘ì—…ì„ í•˜ë‚˜ì”© ì²˜ë¦¬í•œ ë‹¤ìŒ, ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íë¥¼ í™•ì¸í•˜ì—¬ "ë‹¤ì‹œ ì‹œìž‘"í•¨

ëª¨ë“  ì›¹ APIëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë‚˜?

- ì•„ë‹˜. ë¹„ë™ê¸° ìž‘ì—…ì„ ì‹œìž‘í•˜ëŠ” ìž‘ì—…ë§Œ ê°€ëŠ¥
- `document.getElementById()` ë˜ëŠ” `localStorage.setItem()` ë“±ì€ ë™ê¸°ì‹ìœ¼ë¡œ ì²˜ë¦¬ë¨

### ìš”ì•½

í˜¸ì¶œ ìŠ¤íƒì´ ë¹„ì–´ìžˆìŒ

ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì—ì„œ ìž‘ì—…ì„ ì´ë™ (ì™„ì „ížˆ ë¹Œ ë•Œê¹Œì§€)

ê·¸ëŸ° ë‹¤ìŒ íƒœìŠ¤í¬ íë¡œ ì´ë™í•´ ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ ìž‘ì—…ì„ í˜¸ì¶œ ìŠ¤íƒìœ¼ë¡œ ì´ë™

ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ ìž‘ì—…ì„ ì²˜ë¦¬í•œ í›„, ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íë¥¼ í™•ì¸í•˜ì—¬ "ë‹¤ì‹œ ì‹œìž‘"í•¨

ë§¤ìš° ìž‘ì€ ì§€ì—°ìœ¼ë¡œ `setTimeout` ëŒ€ì‹  `queueMicrotask`ë¥¼ ì‚¬ìš©

- ì§€ì—° ì—†ì´ ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ë¥¼ ì˜ˆì•½í•˜ë¯€ë¡œ `setTimeout` ë³´ë‹¤ ë” ì•ˆì •ì ì´ê³  íš¨ìœ¨ì 

## ì°¸ê³ 

> [JavaScript Visualized: Event Loop, Web APIs, (Micro)task Queue](https://www.lydiahallie.com/blog/event-loop)

> [â­ï¸ðŸŽ€ JavaScript Visualized: Promises & Async/Await](https://dev.to/lydiahallie/javascript-visualized-promises-async-await-5gke)

> [Difference between microtask and macrotask queue in the event loop](https://dev.to/jeetvora331/difference-between-microtask-and-macrotask-queue-in-the-event-loop-4i4i)
