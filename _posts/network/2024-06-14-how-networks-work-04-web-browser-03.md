---
title: 1%의 네트워크 원리 (04) - 웹 브라우저가 메시지를 생성 3
date: 2024-06-14 15:44:19 +0900
last_modified_at: 2024-06-17 17:10:09 +0900
categories: [Network]
tags: [network]
---

전세계의 DNS 서버가 연대

# 1%의 네트워크 원리 (04) - 전세계의 DNS 서버가 연대

## 03 전세계의 DNS 서버가 연대

### 1 DNS 서버의 기본 동작

DNS 서버

- 클라이언트에서 조회 메시지 받고 응답 메시지 회답

조회 메시지

- 이름
  - 서버, 메일 배송 목적지 등
- 클래스
  - 항상 인터넷을 나타내는 `IN`
  - 인터넷 외 네트워크에서의 이용까지 고려했었음
  - 지금은 인터넷 외의 네트워크는 소멸
- 타입
  - 이름에 어떤 타입의 정보가 지원되는지 나타냄
  - `A`: 이름에 IP 주소 지원됨(Address)
  - `MX`: 이름에 메일 배송 목적지 지원됨
    - 메일 서버의 우선순위
    - 메일 서버의 이름
    - 메일 서버의 IP 주소
  - `PTR`: IP 주소에서 이름 조사
  - `CNAME`: 이름에 alias 붙이기
  - `NS`: DNS 서버의 IP 주소 등록
  - `SOA`: 도메인 자체의 속성 정보를 등록

`www`

- 최초에 웹의 구조를 만들 때 `www`라는 이름으로 웹 서버를 등록한 것들이 많았어서 관례가 됨

```
tone@cyber.co.kr
```

- 이름: `cyber.co.kr`
- 클래스: `IN`
- 타입: `MX`
- 응답 반환 예시: `10 mail.cyber.co.kr``

메일 서버의 우선순위

- 메일 배송 목적지로 복수의 메일 서버가 등록되어 있을 때 어느 메일 서버를 우선 선택해야 하는지를 판단하기 위한 값
- 작은 값으로 등록되어 있는 메일 서버를 우선 선택

이러한 정보들은 등록정보가 DNS 서버의 설정파일 등에 입력됨

- 리소스 레코드: 테이블의 1행 정보

### 2 도메인의 계층

조회 메시지를 받은 DNS 서버에 정보가 등록되어 있지 않은 경우

- 정보를 분산시켜 다수의 DNS 서버에 등록
- 다수의 DNS 서버가 연대해 어디에 정보가 등록되어 있는지 찾아내는 구조

계층적 구조

```
www.lab.cyber.co.kr
```

- 오른쪽으로 갈수록 상위계층
- 왼쪽으로 갈수록 하위(sub) 도메인
- 점(`.`)이 계층을 구분
- 도메인을 하나의 부서로 볼 수 있음

### 3 담당 DNS 서버를 찾아 IP 주소를 가져옴

인터넷에는 DNS 서버가 수만 대

```
www.lab.glasscom.com.
```

- 최상위 도메인이 `com`
- 맨 뒤의 점이 루트 도메인

최상위 도메인

- `com`, `kr` 등

루트 도메인

- 도메인명이 없음
- 명시적으로 써야 한다면 맨 뒤에 점(`.`)을 찍음
- 루트 도메인의 DNS 서버를 인터넷에 존재하는 모든 DNS 서버에 전부 등록
- 루트 도메인의 DNS 주소에 할당된 IP 주소는 전세계 13개 밖에 없음
- 좀처럼 변경되지 않음
- IP 주소는 13개이나 실제로는 다수의 서버 기계 존재

```
www.lab.glasscom.com
```

1. 클라이언트
2. 가장 가까운 DNS 서버
3. 루트 도메인
4. com 도메인
5. glasscom 도메인
6. lab 도메인

순서

1. 클라이언트 PC -> 가장 가까운 DNS 서버
2. 가장 가까운 DNS 서버 -> 루트 도메인
3. 가장 가까운 DNS 서버 <- 루트 도메인
4. 가장 가까운 DNS 서버 -> com 도메인
5. 가장 가까운 DNS 서버 <- com 도메인
6. 가장 가까운 DNS 서버 -> glasscom 도메인
7. 가장 가까운 DNS 서버 <- glasscom 도메인
8. 가장 가까운 DNS 서버 -> lab 도메인
9. 가장 가까운 DNS 서버 <- lab 도메인
10. 클라이언트 PC <- 가장 가까운 DNS 서버
11. 클라이언트 PC -> www 도메인
12. 클라이언트 PC <- www 도메인

### 4 DNS 서버는 캐시 기능으로 빠르게 회답 가능

현실의 인터넷에서는 한 대의 DNS 서버의 복수의 도메인 정보 등록 가능

DNS 서버는 한번 검사한 이름을 캐시에 등록 가능

## 참고

성공과 실패를 결정하는 1%의 네트워크 원리
